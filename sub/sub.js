!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=a(n(3)),r=a(n(8));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="",this._width=0,this._height=0,this._x=0,this._y=0,this._anchorX=.5,this._anchorY=.5,this._skewX=0,this._skewY=0,this._rotation=0,this._scaleX=1,this._scaleY=1,this._layout=null,this._matDirty=!0,this._mat=new r.default,this._totalMat=new r.default,this._parentMat=new r.default,this._order=0,this._zorder=0,this._addOrder=0,this.color="rgba(255, 255, 255, 1)",this.opacity=1,this.visible=!0,this._parent=null,this.children=[],this._childrenOrderDirty=!1}return i(t,[{key:"addChild",value:function(t){t.parent=this}},{key:"getChildByName",value:function(t){return this.children.find(function(e){return e.name==t})||null}},{key:"findChildByPath",value:function(t){for(var e=t.split("/"),n=this,i=0,o=e.length;i<o;++i)if(!(n=n.getChildByName(e[i])))return null;return n}},{key:"removeAllChildren",value:function(){for(var t=0,e=this.children.length;t<e;++t)this.children[t]._parent=null,this.children[t].destroy();this.children.length=0}},{key:"destroy",value:function(){if(this._parent){var t=this._parent.children.indexOf(this);-1!=t&&this._parent.children.splice(t,1)}this.name="",this._mat=null,this._totalMat=null,this._parentMat=null,this._parent=null,this.removeAllChildren()}},{key:"adapt",value:function(){}},{key:"update",value:function(t){this.updateSelf(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].update(t)}},{key:"updateSelf",value:function(t){}},{key:"isRecursiveVisible",value:function(){for(var t=this;t;){if(!t.visible)return!1;t=t.parent}return!0}},{key:"hitTest",value:function(t){if(!this.isRecursiveVisible())return!1;t=this.convertToNodeSpace(t);var e=-this._anchorX*this._width,n=-this._anchorY*this._height;return t.x>=e&&t.x<e+this._width&&t.y>=n&&t.y<n+this._height}},{key:"convertToNodeSpace",value:function(t){var e=new r.default;this._totalMat.invert(e);var n=new o.default;return e.transform(t,n),n}},{key:"convertToWorldSpace",value:function(t){var e=new o.default;return this._totalMat.transform(t,e),e}},{key:"processLayout",value:function(){if(this._layout&&this._parent){var t=this._layout,e=this._parent._width,n=this._parent._height,i=-this._parent._width*this._parent._anchorX,o=-this._parent._height*this._parent._anchorY,r=this._width*this._anchorX,a=this._height*this._anchorY,s=this._width,l=this._height;void 0!=t.centerX?this._x=i+e/2+t.centerX+r-s/2:void 0!=t.leftX?this._x=i+t.leftX:void 0!=t.left?this._x=i+t.left+r:void 0!=t.right&&(this._x=i+e-t.right+r-s),void 0!=t.centerY?this._y=o+n/2+t.centerY+a-l/2:void 0!=t.topY?this._y=o+t.topY:void 0!=t.top?this._y=o+t.top+a:void 0!=t.bottom&&(this._y=o+n-t.bottom+a-l)}}},{key:"updateMat",value:function(t){this.processLayout(),this._mat.identity(),this._mat.translate(new o.default(this._x,this._y),this._mat),this._mat.scale(new o.default(this._scaleX,this._scaleY),this._mat),this._mat.rotate(this._rotation,this._mat),t?(r.default.multiply(t,this._mat,this._totalMat),t.cloneTo(this._parentMat)):(this._mat.cloneTo(this._totalMat),this._parentMat.identity()),this._matDirty=!1}},{key:"visit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.visible){this._matDirty&&this.updateMat(e),this._childrenOrderDirty&&(this.children.sort(function(t,e){return t._zorder-e._zorder||t._addOrder-e._addOrder}),this._childrenOrderDirty=!1),t.save();var n=this._mat.elements;t.transform(n[0],n[1],n[3],n[4],n[6],n[7]),t.strokeStyle=this.color,t.fillStyle=this.color,t.globalAlpha*=this.opacity,this.draw(t),t.restore()}}},{key:"draw",value:function(t){for(var e=this.children.length,n=0;n<e&&!(this.children[n].zorder>=0);++n)this.children[n].visit(t,this._totalMat);this.drawSelf(t);for(var i=n;i<e;++i)this.children[i].visit(t,this._totalMat)}},{key:"drawSelf",value:function(t){}},{key:"parent",set:function(e){this._parent=e,this._order=this._parent._order+1,this._addOrder=++t._ADD_ORDER,e.children.push(this),e._childrenOrderDirty=!0},get:function(){return this._parent}},{key:"width",set:function(t){this._width=t,this._matDirty=!0},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this._matDirty=!0},get:function(){return this._height}},{key:"x",set:function(t){this._x=t,this._matDirty=!0},get:function(){return this._x}},{key:"y",set:function(t){this._y=t,this._matDirty=!0},get:function(){return this._y}},{key:"anchorX",set:function(t){this._anchorX=t,this._matDirty=!0},get:function(){return this._anchorX}},{key:"anchorY",set:function(t){this._anchorY=t,this._matDirty=!0},get:function(){return this._anchorY}},{key:"skewX",set:function(t){this._skewX=t,this._matDirty=!0},get:function(){return this._skewX}},{key:"skewY",set:function(t){this._skewY=t,this._matDirty=!0},get:function(){return this._skewY}},{key:"rotation",set:function(t){this._rotation=t,this._matDirty=!0},get:function(){return this._rotation}},{key:"scaleX",set:function(t){this._scaleX=t,this._matDirty=!0},get:function(){return this._scaleX}},{key:"scaleY",set:function(t){this._scaleY=t,this._matDirty=!0},get:function(){return this._scaleY}},{key:"anchor",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.default;this._anchorX=t.x,this._anchorY=t.y,this._matDirty=!0},get:function(){return new o.default(this._anchorX,this._anchorY)}},{key:"position",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.default;this._x=t.x,this._y=t.y,this._matDirty=!0},get:function(){return new o.default(this.x,this.y)}},{key:"scale",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t instanceof o.default?(this.scaleX=t.x,this.scaleY=t.y):this.scaleX=this.scaleY=t,this._matDirty=!0},get:function(){return new o.default(this.scaleX,this.scaleY)}},{key:"zorder",set:function(t){this._zorder=t-0,this._parent&&(this._parent._childrenOrderDirty=!0)},get:function(){return this._zorder}},{key:"layout",set:function(t){this._layout=t,this._matDirty=!0},get:function(){return this._layout||(this._layout={}),this._layout}}],[{key:"convertToCanvasSpace",value:function(t,e){e.x=t.x/window.innerWidth*CVS.width,e.y=t.y/window.innerHeight*CVS.height}}]),t}();e.default=s,s._ADD_ORDER=0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=n(0),s=(i=a)&&i.__esModule?i:{default:i};var l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t&&n.setImage(t),n.visible=!0,n._grid=[0,0,0,0],n._gridEnabled=!1,n._loaded=!1,n._onloaded=null,n._autoUpdateSize=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"setImage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this._loaded=!1,this.img&&(this.img.onload=null),"string"==typeof e){var n=new Image;n.onload=function(){t.img=n,t._autoUpdateSize?(t.width=n.width,t.height=n.height):(t.width=t.width<=0?n.width:t.width,t.height=t.height<=0?n.height:t.height),t._loaded=!0,t._onloaded&&t._onloaded()},n.src=e}else this.img=e,this.width=this.width<=0?img.width:this.width,this.height=this.height<=0?img.height:this.height,this._loaded=!0,this._onloaded&&this._onloaded()}},{key:"destroy",value:function(){this.img=null,this._onloaded=null,r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"setGridEnabled",value:function(t){this._gridEnabled=t}},{key:"setGrid",value:function(t,e,n,i){t=t||0,e=void 0!=e?e:t,n=void 0!=n?n:t,i=void 0!=i?i:t,this._grid[0]=t,this._grid[1]=e,this._grid[2]=n,this._grid[3]=i}},{key:"drawSelf",value:function(t){if(this.img){if(this._gridEnabled){var n=this.width,i=this.height,o=this.img.width,a=this.img.height,s=-n*this.anchorX,l=-i*this.anchorY,u=this._grid[0],c=this._grid[1],h=this._grid[2],f=this._grid[3];0!=f&&0!=u&&t.drawImage(this.img,0,0,f,u,s,l,f,u),0!=u&&t.drawImage(this.img,f,0,o-f-c,u,s+f,l,n-f-c,u),0!=c&&0!=u&&t.drawImage(this.img,o-c,0,c,u,s+n-c,l,c,u),0!=f&&t.drawImage(this.img,0,u,f,a-u-h,s,l+u,f,i-u-h),t.drawImage(this.img,f,u,o-f-c,a-u-h,s+f,l+u,n-f-c,i-u-h),0!=c&&t.drawImage(this.img,o-c,u,c,a-u-h,s+n-c,l+u,c,i-u-h),0!=f&&0!=h&&t.drawImage(this.img,0,a-h,f,h,s,l+i-h,f,h),0!=h&&t.drawImage(this.img,f,a-h,o-f-c,h,s+f,l+i-h,n-f-c,h),0!=c&&0!=h&&t.drawImage(this.img,o-c,a-h,c,h,s+n-c,l+i-h,c,h)}else t.drawImage(this.img,-this.width*this.anchorX,-this.height*this.anchorY,this.width,this.height);r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"drawSelf",this).call(this,t)}else r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"drawSelf",this).call(this,t)}},{key:"isCollideWith",value:function(t){var e=t.x+t.width/2,n=t.y+t.height/2;return!(!this.visible||!t.visible)&&!!(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height)}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=u(n(0)),r=u(n(1)),a=u(n(5)),s=u(n(4)),l=(u(n(3)),u(n(13)));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"res",value:function(t){return wx.getSharedCanvas?"sub/"+t:t}},{key:"convertLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:640;return Math.round(t/e*CVS.width)}},{key:"adjustLayerPos",value:function(t){return!!Array.isArray(this._layerPos)&&(t.x=this._layerPos[0],t.y=this._layerPos[1],!0)}},{key:"adjustLayerSize",value:function(t){return!!Array.isArray(this._layerSize)&&(t.width=this._layerSize[0],t.height=this._layerSize[1],!0)}},{key:"createMask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:640,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1136,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,i=new r.default(this.res("res/black.png"));return i.name="mask",i.width=Math.round(1.2*t),i.height=Math.round(1.2*e),i.opacity=n,i}},{key:"_drawRoundRect",value:function(t,e,n,i,o,r){t.beginPath(),t.arc(e+r,n+r,r,Math.PI,3*Math.PI/2),t.lineTo(i-r+e,n),t.arc(i-r+e,r+n,r,3*Math.PI/2,2*Math.PI),t.lineTo(i+e,o+n-r),t.arc(i-r+e,o-r+n,r,0,1*Math.PI/2),t.lineTo(r+e,o+n),t.arc(r+e,o-r+n,r,1*Math.PI/2,Math.PI),t.closePath()}},{key:"createRect",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new l.default;return r.width=t,r.height=e,r.color=i,r.onDraw=o<=0?function(n){n.fillRect(0,0,t,e)}:function(i){n._drawRoundRect(i,0,0,t,e,o)},r}},{key:"createDialog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:550,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:673,n=this.convertLength,i=new o.default;i.name="dialog",i.width=t,i.height=e;var a=new r.default(this.res("res/bg1.png"));a.setGrid(16,16,0,16),a.setGridEnabled(!0),a.width=t,a.height=n(60),a.layout.centerX=0,a.layout.top=0,a._onloaded=function(){i._onloaded&&i._onloaded()},i.addChild(a);var s=new r.default(this.res("res/bg2.png"));return s.setGrid(25,25,25,25),s.setGridEnabled(!0),s.width=t,s.height=e-a.height,s.layout.centerX=0,s.layout.bottom=0,s._onloaded=function(){i._onloaded&&i._onloaded()},i.addChild(s),i}},{key:"createListView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:530,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=this.convertLength,i=new a.default;return i.name="listview",i.anchorX=0,i.anchorY=0,i.width=t,i.height=e,i.margin=0,i.elastic=n(50),i}},{key:"createRankItem",value:function(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:530,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=this.convertLength,d=new o.default;if(d.name="item"+t,d.width=a,d.height=l,c){var _=new r.default(c);_.width=a,_.height=l,_.layout.top=0,_.layout.left=0,_.opacity=h,_.zorder=-1,d.addChild(_)}var p=new s.default(t+"",{font:"SimHei",fontSize:f(32),lineHeight:f(36),fontStyle:"italic",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"normal"});p.layout.leftX=f(41),p.layout.centerY=0,p.color=1==t?"#F97E00":2==t?"#FEC11E":3==t?"#FBD413":"#BBBBBB",d.addChild(p);var y=new r.default(e);return y.width=y.height=f(70),y.layout.leftX=f(137),y.layout.centerY=0,u&&(y._onloaded=function(){u.refresh()}),d.addChild(y),(p=new s.default(n,{font:"SimHei",fontSize:f(24),lineHeight:f(26),fontStyle:"normal",fontWeight:"normal",hAlign:"left",vAlign:"middle",fit:"scale"})).width=f(188),p.height=f(50),p.anchorX=0,p.layout.leftX=f(205),p.layout.centerY=0,p.color="#999999",d.addChild(p),(p=new s.default(i,{font:"SimHei",fontSize:f(28),lineHeight:f(32),fontStyle:"normal",fontWeight:"bold",hAlign:"right",vAlign:"middle",fit:"scale"})).anchorX=1,p.width=f(100),p.height=f(50),p.layout.left=f(400),p.layout.centerY=0,p.color="#ffffff",d.addChild(p),d}},{key:"createHoriItem",value:function(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:176,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:306,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=this.convertLength,f=new o.default;if(f.name="item"+t,f.width=l,f.height=u,a){var d=new r.default(this.res("res/item_bg.png"));d.width=l,d.height=u,d.layout.top=0,d.layout.left=0,d.opacity=.2,c&&(d._onloaded=function(){c.refresh()}),f.addChild(d)}var _=new s.default(t+"",{font:"SimHei",fontSize:h(32),lineHeight:h(36),fontStyle:"italic",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"normal"});_.layout.centerX=0,_.layout.topY=h(45),_.color=1==t?"#F97E00":2==t?"#FEC11E":3==t?"#FBD413":a?"#2cc0e5":"#BBBBBB",f.addChild(_);var p=new r.default(e);return p.width=p.height=h(70),p.layout.topY=h(113),p.layout.centerX=0,c&&(p._onloaded=function(){c.refresh()}),f.addChild(p),(_=new s.default(n,{font:"SimHei",fontSize:h(18),lineHeight:h(20),fontStyle:"normal",fontWeight:"normal",hAlign:"center",vAlign:"middle",fit:"scale"})).width=h(176),_.height=h(50),_.layout.centerX=0,_.layout.topY=h(205),_.color="#999999",f.addChild(_),(_=new s.default(i,{font:"SimHei",fontSize:h(28),lineHeight:h(32),fontStyle:"normal",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"normal"})).layout.centerX=0,_.layout.topY=h(263),_.color="#ffffff",f.addChild(_),f}},{key:"createTips",value:function(){var t=this.convertLength,e=new s.default("请升级你的微信版本!",{font:"SimHei",fontSize:t(26),lineHeight:t(30),hAlign:"center",vAlign:"middle"});return e.color="#999999",e.anchorX=.5,e.layout.centerX=0,e.layout.centerY=-50,e}},{key:"convertToMainDomainSpace",value:function(e,n){if(t._resolution){var i=t._resolution[0],r=t._resolution[1],a=t._resolution[2],s=t._resolution[3];n.x=e.x/window.innerWidth*a-i,n.y=e.y/window.innerHeight*s-r}else o.default.convertToCanvasSpace(e,n)}}]),t}();e.default=c,c._layerPos=null,c._layerSize=null,c._resolution=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return i(t,[{key:"copy",value:function(t){this.x=t.x,this.y=t.y}},{key:"cloneTo",value:function(t){t.x=this.x,t.y=this.y}},{key:"set",value:function(t,e){this.x=t,this.y=e}}],[{key:"p",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=n||{},i._str=void 0!=t?t+"":"",i._font=n.font||"SimHei",i._fontSize=void 0!=n.fontSize?n.fontSize:36,i._lineHeight=void 0!=n.lineHeight?n.lineHeight:i._fontSize,i._fontStyle=n.fontStyle||"normal",i._fontWeight=n.fontWeight||"normal",i._hAlign=n.hAlign||"center",i._vAlign=n.vAlign||"middle",i._fit=n.fit||"normal",i._strokeColor=void 0!=n.strokeColor?n.strokeColor:"#000000",i._strokeWidth=void 0!=n.strokeWidth?n.strokeWidth:0,i._fontConfig="",i._fontDirty=!0,i._list=[],i._fitDirty=!0,i._firstLineY=0,i._fontScale=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"configFont",value:function(){this._fontConfig=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px/"+this._lineHeight+"px "+this._font,this._fontDirty=!1}},{key:"fitIt",value:function(t){if("warp"==this._fit){this._list.length=0;for(var e=this._str.split(""),n="",i=0,o=e.length;i<o;++i)"\n"==e[i]?(this._list.push(n),n=""):t.measureText(n+e[i]).width>=this._width?(this._list.push(n),n=e[i]):n+=e[i];n.length>0&&this._list.push(n),this._fontScale=1}else if("scale"==this._fit){this._list=this._str.split("\n");for(var r=this._list.length,a=0,s=0;s<r;++s){var l=t.measureText(this._list[s]);a=Math.max(a,l.width)}var u=this._lineHeight*r,c=0==a?1:this._width/a,h=0==u?1:this._height/u;this._fontScale=Math.min(1,c,h)}else this._fontScale=1,this._list=this._str.split("\n");"top"==this._vAlign?this._firstLineY=0:"bottom"==this._vAlign?this._firstLineY=-this._lineHeight*(this._list.length-1):this._firstLineY=-this._lineHeight*(this._list.length-1)/2,this._fitDirty=!1}},{key:"draw",value:function(t){if(t.save(),this._fontDirty&&this.configFont(),t.font=this._fontConfig,t.textAlign=this._hAlign,t.textBaseline=this._vAlign,t.strokeStyle=this._strokeColor,t.lineWidth=this._strokeWidth,this._fitDirty&&this.fitIt(t),t.scale(this._fontScale,this._fontScale),this._strokeWidth>0)for(var n=0,i=this._list.length;n<i;++n)t.strokeText(this._list[n],0,this._firstLineY+this._lineHeight*n);for(var o=0,r=this._list.length;o<r;++o)t.fillText(this._list[o],0,this._firstLineY+this._lineHeight*o);t.restore(),function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"string",set:function(t){this._str=t+"",this._fitDirty=!0},get:function(){return this._str}},{key:"font",set:function(t){this._font=t,this._fontDirty=!0,this._fitDirty=!0},get:function(){return this._font}},{key:"fontSize",set:function(t){this._fontSize=t,this._fontDirty=!0,this._fitDirty=!0},get:function(){return this._fontSize}},{key:"lineHeight",set:function(t){this._lineHeight=t,this._fontDirty=!0,this._fitDirty=!0},get:function(){return this._lineHeight}},{key:"fontStyle",set:function(t){this._fontStyle=t,this._fontDirty=!0},get:function(){return this._fontStyle}},{key:"fontWeight",set:function(t){this._fontWeight=t,this._fontDirty=!0},get:function(){return this._fontWeight}},{key:"fit",set:function(t){this._fit=t,this._fitDirty=!0},get:function(){return this._fit}},{key:"hAlign",set:function(t){this._hAlign=t},get:function(){return this._hAlign}},{key:"vAlign",set:function(t){this._vAlign=t,this._fitDirty=!0},get:function(){return this._vAlign}},{key:"strokeColor",set:function(t){this._strokeColor=t},get:function(){return this._strokeColor}},{key:"strokeWidth",set:function(t){this._strokeWidth=t},get:function(){return this._strokeWidth}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=c(n(0)),a=(c(n(1)),c(n(3))),s=(c(n(8)),c(n(7))),l=c(n(2)),u=c(n(6));function c(t){return t&&t.__esModule?t:{default:t}}var h=new a.default,f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._content=null,t._contentDirty=!0,t._margin=0,t._posY=0,t._lastPos=new a.default,t.elastic=0,t._touching=!1,t._needElastic=!1,t._destPosY=0,t._srcPosY=0,t._v=[],t._ts=0,t._tween=null,t.initContent(),t.addTouchEvent(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"initContent",value:function(){var t=new r.default;this.addChild(t),t.color="#0000ff",t.anchorX=0,t.anchorY=0,t.zorder=1,this._content=t}},{key:"setContent",value:function(t){var e=this;this._content&&this._content.destroy(),this.updateContent=function(){e._contentDirty=!1},this.addChild(t),t.anchorX=0,t.anchorY=0,t.zorder=1,this._content=t,this.updateContentPos()}},{key:"addItem",value:function(t){t.anchorX=t.anchorY=0,this._content.addChild(t),this._contentDirty=!0}},{key:"removeItem",value:function(t){t.destroy(),this._contentDirty=!0}},{key:"removeAllItem",value:function(){this._content.removeAllChildren(),this._contentDirty=!0}},{key:"destroy",value:function(){this._tween&&u.default.remove(this._tween),this._tween=null,s.default.off(this,"touchstart"),s.default.off(this,"touchmove"),s.default.off(this,"touchend"),s.default.off(this,"touchcancel"),this._lastPos=null,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"updateContent",value:function(){for(var t=0,e=0,n=this._content.children.length;e<n;++e){var i=this._content.children[e];i.x=0,i.y=t,t+=i.height+this._margin}this._content.width=this._width,this._content.height=t-this._margin,this.updateContentPos(),this._contentDirty=!1}},{key:"refresh",value:function(){}},{key:"updateContentPos",value:function(){this._content.x=-this._width*this._anchorX,this._content.y=-this._height*this._anchorY+this._posY}},{key:"calcPosY",value:function(t){this._posY+=t}},{key:"addTouchEvent",value:function(){s.default.on(this,"touchstart",this.onTouchStart.bind(this))}},{key:"onTouchStart",value:function(t){h.set(t.touches[0].clientX,t.touches[0].clientY),l.default.convertToMainDomainSpace(h,h),this.hitTest(h)&&(this._lastPos.copy(h),this._ts=Date.now(),this._v.length=0,this._touching=!0,this._needElastic=!1,s.default.on(this,"touchmove",this.onTouchMove.bind(this)),s.default.on(this,"touchend",this.onTouchEnd.bind(this)),s.default.on(this,"touchcancel",this.onTouchCancel.bind(this)))}},{key:"onTouchMove",value:function(t){h.set(t.touches[0].clientX,t.touches[0].clientY),l.default.convertToMainDomainSpace(h,h);var e=h.y-this._lastPos.y;this.calcPosY(e),this.updateContentPos(),this._lastPos.copy(h);var n=Date.now();this._v.push({s:e,t:n-this._ts}),this._v.length>3&&this._v.shift(),this._ts=n}},{key:"onTouchEnd",value:function(t){var e=this;s.default.off(this,"touchmove"),s.default.off(this,"touchend"),s.default.off(this,"touchcancel"),this._touching=!1,this._destPosY=this._posY;var n=0,i=0;if(this._v.forEach(function(t){n+=t.s,i+=t.t}),i>0){var o=n/i;i=Math.abs(o)/.004,n=.5*o*i,this._destPosY+=n}i=Math.min(1,i/1e3),this._destPosY>0?(this._destPosY=0,i=.3):this._destPosY+this._content.height<this._height&&(this._destPosY=Math.min(0,-(this._content.height-this._height)),i=.3),this._destPosY!=this._posY&&(this._needElastic=!0,this._srcPosY=this._posY,this._tween&&u.default.remove(this._tween),this._tween=new u.default.Tween({y:this._srcPosY}).to({y:this._destPosY},i).onUpdate(function(t){e._posY=t.y,e.updateContentPos()}).easing(u.default.Easing.Quadratic.Out).start())}},{key:"onTouchCancel",value:function(t){this.onTouchEnd(t)}},{key:"draw",value:function(t){this._contentDirty&&this.updateContent(),t.save(),t.beginPath(),t.rect(-this.width*this.anchorX,-this.height*this.anchorY,this.width,this.height),t.closePath(),t.clip(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),t.restore()}},{key:"margin",set:function(t){this._margin=t,this._contentDirty=!0},get:function(){return this._margin}}]),e}();e.default=f},function(t,e,n){"use strict";(function(n){"function"==typeof Symbol&&Symbol.iterator;var i,o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:a.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r,a=new o;a.Group=o,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"==typeof window&&void 0!==n?a.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?a.now=window.performance.now.bind(window.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?a.now()+parseFloat(t):t:a.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var o=this._valuesStart[e]||0,r=this._valuesEnd[e];r instanceof Array?this._object[e]=this._interpolationFunction(r,i):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?o+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[e]=o+(r-o)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},a.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-a.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*a.Easing.Bounce.In(2*t):.5*a.Easing.Bounce.Out(2*t-1)+.5}}},a.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),r=a.Interpolation.Utils.Linear;return e<0?r(t[0],t[1],i):e>1?r(t[n],t[n-1],n-i):r(t[o],t[o+1>n?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,r=a.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-e,i-s)*o(e,s)*t[s]*r(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),r=a.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),r(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):e<0?t[0]-(r(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(r(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):r(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=a.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(r=[1],function(t){var e=1;if(r[t])return r[t];for(var n=t;n>1;n--)e*=n;return r[t]=e,e}),CatmullRom:function(t,e,n,i,o){var r=.5*(n-t),a=.5*(i-e),s=o*o;return(2*e-2*n+r+a)*(o*s)+(-3*e+3*n-2*r-a)*s+r*o+e}}},void 0===(i=function(){return a}.apply(e,[]))||(t.exports=i)}).call(this,n(14))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"on",value:function(t,e,n){this.off(t,e);var i=this._list[e];void 0!=i&&i.push({t:t,fn:n})}},{key:"off",value:function(t,e){var n=this._list[e];if(void 0!=n)for(var i=n.length-1;i>=0;--i){n[i].t==t&&n.splice(i,1)}}},{key:"_exec",value:function(t){var e=function(t,e){return t.order==e.order?t._zorder<e._zorder:t.order<e.order},n=this._list[t];return function(t){n.sort(e);for(var i=n.slice(0),o=0,r=i.length;o<r;++o)i[o].fn&&i[o].fn(t)}}}]),t}();e.default=o,o._list={touchstart:[],touchmove:[],touchend:[],touchcancel:[]},canvas.addEventListener("touchstart",o._exec("touchstart"),!1),canvas.addEventListener("touchmove",o._exec("touchmove"),!1),canvas.addEventListener("touchend",o._exec("touchend"),!1),canvas.addEventListener("touchcancel",o._exec("touchcancel"),!1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this.elements=new Float32Array(9);e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}return i(t,[{key:"transform",value:function(t,e){var n=this.elements,i=t.x,o=t.y;e.x=i*n[0]+o*n[3]+n[6],e.y=i*n[1]+o*n[4]+n[7]}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],o=t[3],r=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*r-a*l)+n*(-u*o+a*s)+i*(l*o-r*s)}},{key:"translate",value:function(t,e){var n=e.elements,i=this.elements,o=i[0],r=i[1],a=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=t.x,_=t.y;n[0]=o,n[1]=r,n[2]=a,n[3]=s,n[4]=l,n[5]=u,n[6]=d*o+_*s+c,n[7]=d*r+_*l+h,n[8]=d*a+_*u+f}},{key:"rotate",value:function(t,e){var n=e.elements,i=this.elements,o=i[0],r=i[1],a=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=Math.sin(t),_=Math.cos(t);n[0]=_*o+d*s,n[1]=_*r+d*l,n[2]=_*a+d*u,n[3]=_*s-d*o,n[4]=_*l-d*r,n[5]=_*u-d*a,n[6]=c,n[7]=h,n[8]=f}},{key:"scale",value:function(t,e){var n=e.elements,i=this.elements,o=t.x,r=t.y;n[0]=o*i[0],n[1]=o*i[1],n[2]=o*i[2],n[3]=r*i[3],n[4]=r*i[4],n[5]=r*i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8]}},{key:"invert",value:function(t){var e=t.elements,n=this.elements,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=h*s-l*c,d=-h*a+l*u,_=c*a-s*u,p=i*f+o*d+r*_;p||(t=null),p=1/p,e[0]=f*p,e[1]=(-h*o+r*c)*p,e[2]=(l*o-r*s)*p,e[3]=d*p,e[4]=(h*i-r*u)*p,e[5]=(-l*i+r*a)*p,e[6]=_*p,e[7]=(-c*i+o*u)*p,e[8]=(s*i-o*a)*p}},{key:"transpose",value:function(t){var e=t.elements,n=this.elements;if(t===this){var i=n[1],o=n[2],r=n[5];e[1]=n[3],e[2]=n[6],e[3]=i,e[5]=n[7],e[6]=o,e[7]=r}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8]}},{key:"identity",value:function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}},{key:"cloneTo",value:function(t){var e,n,i;if((n=this.elements)!==(i=t.elements))for(e=0;e<9;++e)i[e]=n[e]}},{key:"clone",value:function(){var t=new this.constructor;return this.cloneTo(t),t}}],[{key:"createFromTranslation",value:function(t,e){e.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t.x,e[7]=t.y,e[8]=1}},{key:"createFromRotation",value:function(t,e){var n=e.elements,i=Math.sin(t),o=Math.cos(t);n[0]=o,n[1]=i,n[2]=0,n[3]=-i,n[4]=o,n[5]=0,n[6]=0,n[7]=0,n[8]=1}},{key:"createFromScaling",value:function(t,e){var n=e.elements;n[0]=t.x,n[1]=0,n[2]=0,n[3]=0,n[4]=t.y,n[5]=0,n[6]=0,n[7]=0,n[8]=1}},{key:"multiply",value:function(t,e,n){var i=n.elements,o=t.elements,r=e.elements,a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5],f=o[6],d=o[7],_=o[8],p=r[0],y=r[1],v=r[2],g=r[3],w=r[4],b=r[5],m=r[6],k=r[7],O=r[8];i[0]=p*a+y*u+v*f,i[1]=p*s+y*c+v*d,i[2]=p*l+y*h+v*_,i[3]=g*a+w*u+b*f,i[4]=g*s+w*c+b*d,i[5]=g*l+w*h+b*_,i[6]=m*a+k*u+O*f,i[7]=m*s+k*c+O*d,i[8]=m*l+k*h+O*_}}]),t}();e.default=o,o.DEFAULT=new o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=r(n(0));r(n(7));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._anchorX=.5,n._anchorY=.5,n._bgcolor=t,n.updateSize(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"updateSize",value:function(){this._width==CVS.width&&this._height==CVS.height||(this._width=CVS.width,this._height=CVS.height,this._x=this._width/2,this._y=this._height/2,this._matDirty=!0)}},{key:"drawSelf",value:function(t){this._bgcolor&&(t.fillStyle=this._bgcolor,t.fillRect(-this.width*this.anchorX,-this.height*this.anchorY,this.width,this.height))}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=s(n(0)),r=s(n(1)),a=s(n(4));s(n(3)),s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._width=CVS.width,n._height=CVS.height,n.key=t||"score";var i=new a.default("拼命加载中...",{font:"SimHei",fontSize:30,lineHeight:32,hAlign:"center",vAlign:"middle",fit:"scale"});return i.width=n.width/3-10,i.height=50,i.color="#ffffff",i.anchorX=.5,i.layout.centerX=0,i.layout.centerY=0,n.addChild(i),n._tips=i,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"destroy",value:function(){this._tips=null,function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"createHoriItem",value:function(t,e,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4];var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:150,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:230,u=arguments[7],c=new o.default;c.name="item"+t,c.width=s,c.height=l;var h=new a.default(t+"",{font:"SimHei",fontSize:42,lineHeight:44,fontStyle:"normal",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"normal"});h.layout.centerX=0,h.layout.topY=32,h.color="#ffffff",c.addChild(h);var f=new r.default(e);return f.width=f.height=120,f.layout.topY=160,f.layout.centerX=0,f._onloaded=u,c.addChild(f),(h=new a.default(n,{font:"SimHei",fontSize:28,lineHeight:30,fontStyle:"normal",fontWeight:"normal",hAlign:"center",vAlign:"middle",fit:"scale"})).width=150,h.height=50,h.layout.centerX=0,h.layout.topY=268,h.color="#ffffff",c.addChild(h),i=parseInt(i)||0,(h=new a.default(i.toLocaleString(),{font:"SimHei",fontSize:32,lineHeight:36,fontStyle:"normal",fontWeight:"normal",hAlign:"center",vAlign:"middle",fit:"scale"})).width=150,h.height=50,h.layout.centerX=0,h.layout.topY=328,h.color="#ffd658",c.addChild(h),c}},{key:"_processData",value:function(t,e){var n=this,i=[],o=function(e,o){var r=e+o;r<0||r>=t.length||(o<0?i.unshift:i.push).call(i,{rank:r+1,nick:t[r].nickname,score:t[r].data[n.key],icon:t[r].avatarUrl,isMe:0==o})},r=t.findIndex(function(t){return t.avatarUrl==e[0].avatarUrl});if(-1!=r){for(var a=[0,-1,1,-2,2],s=0,l=a.length;s<l&&i.length<3;++s)o(r,a[s]);1==i.length&&i.unshift(null)}return i}},{key:"setData",value:function(t){if(this.removeAllChildren(),this._tips.visible=!1,t.friends&&t.friends.length>0&&t.self&&t.self.length>0)for(var e=this._processData(t.friends,t.self),n=0,i=e.length;n<i;++n){var o=e[n];if(o){var r=this.createHoriItem(o.rank,o.icon,o.nick,o.score,o.isMe,this.width/3,this.height,function(){window.main.render()});r.layout.top=0,r.layout.left=n*this.width/3,this.addChild(r)}}window.main.render()}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=n(0),s=(i=a)&&i.__esModule?i:{default:i};var l=function(t){function e(t,n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s._anchorX=0,s._anchorY=0,s._vh=t,s._rh=n,s._data=i,s._dataLen=o,s._modelCreator=r,s._onUpdate=a,s._firstIndex=-1e8,s._visibleModelMap=new Map,s._modelList=[],s._modelCount=Math.ceil(t/n)+1,r)for(var l=0;l<s._modelCount;++l){var u=r();u.anchorX=0,u.anchorY=0,u.visible=!1,s._modelList.push(u),s._visibleModelMap.set(s._firstIndex+l,u),s.addChild(u)}return s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"destroy",value:function(){this._visibleModelMap.clear(),this._modelList.length=0,this._data=null,this._modelCreator=null,this._onUpdate=null,r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"setData",value:function(t,e){this._data=t,this._dataLen=e,this.height=this._dataLen*this._rh+30,this.refresh()}},{key:"refresh",value:function(){if(this._data&&this._dataLen>0){for(var t=this._getFirstIndex(),e=0;e<this._modelCount;++e){var n=e+t;if(!this._visibleModelMap.has(n)){var i=null,o=-1e9;if(o=Math.abs(t-this._firstIndex)>this._modelCount?e+this._firstIndex:t-this._firstIndex<0?n+this._modelCount:n-this._modelCount,this._visibleModelMap.has(o)&&(i=this._visibleModelMap.get(o),this._visibleModelMap.delete(o)),i){var r=n>=0&&n<this._dataLen;this._visibleModelMap.set(n,i),i.visible=r,r&&(i.x=0,i.y=this._rh*n,this._onUpdate&&this._onUpdate(i,n,this._data))}}}this._firstIndex=t}}},{key:"_getFirstIndex",value:function(){return Math.floor(-this.y/this._rh)}},{key:"y",get:function(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"y",this)},set:function(t){!function t(e,n,i,o){var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,i,o)}else if("value"in r&&r.writable)r.value=i;else{var s=r.set;void 0!==s&&s.call(o,i)}return i}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"y",t,this),this.refresh()}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=u(n(0)),r=u(n(1)),a=(u(n(5)),u(n(4))),s=(u(n(3)),u(n(2))),l=u(n(11));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._width=CVS.width,n._height=CVS.height,n._zorder=1,n._lv=null,n._container=null,n._tips=null,n._pageLbl=null,n._self=null,n.key=t||"score",n._index=0,n._pagesCount=0,n._itemsPerPage=e.pageMode?6:1e8,n._data=null,n._addUi(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"_addUi",value:function(){var t=this,n=this._width,i=this._height-120,o=new l.default(i,88,null,0,this.createRankItem.bind(this,n,88),function(e,n,i){if(n>=0&&n<i.length){var o=i[n];t.updateRankItem(e,o.rank,o.avatarUrl,o.nickname,o.data[t.key],!0)}});if(this._container=o,e.pageMode)this.addChild(o);else{var r=s.default.createListView(n,i);r.layout.left=0,r.layout.top=0,r.margin=0,this.addChild(r),this._lv=r,r.setContent(o)}var u=new this.createRankItem(n,88);u.layout.left=0,u.layout.bottom=0,this.addChild(u),this._self=u;var c=new a.default("拼命加载中...",{font:"SimHei",fontSize:30,lineHeight:32,hAlign:"center",vAlign:"middle"});if(c.color="#5e5e5e",c.anchorX=.5,c.layout.centerX=0,c.layout.topY=275,this.addChild(c),this._tips=c,e.pageMode){var h=new a.default("",{font:"SimHei",fontSize:28,lineHeight:30,fontStyle:"normal",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"scale"});h.width=130,h.height=32,h.layout.centerX=0,h.layout.bottom=16,h.color="#ffffff",this.addChild(h),this._pageLbl=h}}},{key:"destroy",value:function(){this._container=null,this._tips=null,this._pageLbl=null,function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"createRankItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:460,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:88,n=new o.default;n.anchorX=0,n.anchorY=0,n.width=t,n.height=e;var i=new r.default(s.default.res("res/split.png"));i.zorder=-1,i.width=t,i.layout.left=0,i.layout.bottom=0,n.addChild(i),n.__bg=i;var l=new r.default;l.layout.leftX=33,l.layout.centerY=0,l._autoUpdateSize=!0,n.addChild(l),n.__rankBg=l;var u=new a.default("",{fontSize:34,lineHeight:45,fontStyle:"normal",fontWeight:"bold",hAlign:"center",vAlign:"middle",fit:"scale"});u.width=80,u.height=60,u.layout.leftX=33,u.layout.centerY=0,u.color="#5e5e5e",n.addChild(u),n.__rank=u;var c=new r.default(s.default.res("res/icon.png"));c.width=c.height=70,c.layout.leftX=117,c.layout.centerY=0,n.addChild(c),n.__icon=c;var h=new a.default("",{fontSize:30,lineHeight:36,fontStyle:"normal",fontWeight:"normal",hAlign:"center",vAlign:"middle",fit:"scale"});return h.width=150,h.height=50,h.layout.leftX=258,h.layout.centerY=0,h.color="#6a6a6a",n.addChild(h),n.__nick=h,(h=new a.default("",{fontSize:24,lineHeight:32,fontStyle:"normal",fontWeight:"bold",hAlign:"right",vAlign:"middle",fit:"scale"})).anchorX=1,h.width=85,h.height=50,h.layout.leftX=452,h.layout.centerY=0,h.color="#df467e",n.addChild(h),n.__score=h,n}},{key:"updateRankItem",value:function(t,e,n,i,o){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=t;return a.__bg.visible=r,e<=3&&e>=1?(a.__rank.visible=!1,a.__rankBg.visible=!0,a.__rankBg.setImage(s.default.res("res/rank"+e+".png"))):(a.__rankBg.visible=!1,a.__rank.visible=!0,a.__rank.string=e+""),a.__icon.setImage(s.default.res("res/icon.png")),a.__icon.setImage(n),a.__nick.string=i,a.__score.string=o,a}},{key:"prev",value:function(){var t=math.min(this._pagesCount-1,Math.max(0,this._index-1));t!=this._index&&this.loadPage(t)}},{key:"next",value:function(){var t=Math.max(0,Math.min(this._pagesCount-1,this._index+1));t!=this._index&&this.loadPage(t)}},{key:"loadPage",value:function(t){if(this._data&&this._data.friends&&!(t<0||t>=this._pagesCount)){this._index=t;var n=this._itemsPerPage*t,i=this._data.friends.slice(n,n+this._itemsPerPage);this._container.setData(i,i.length),this._pageLbl&&(e.pageMode?(this._pageLbl.visible=!0,this._pageLbl.string=t+1+"/"+this._pagesCount):this._pageLbl.visible=!1),window.main.render()}}},{key:"loadSelf",value:function(){var t=this;if(this._data&&this._data.friends&&this._data.self&&this._data.self[0]){var e=this._data.friends.findIndex(function(e){return e.avatarUrl==t._data.self[0].avatarUrl});if(-1!=e){this._self.visible=!0;var n=this._data.friends[e];return void this.updateRankItem(this._self,n.rank,n.avatarUrl,n.nickname,n.data[this.key],!1)}}this._self.visible=!1}},{key:"setData",value:function(t){var e=t.friends.length;this._pagesCount=Math.ceil(e/this._itemsPerPage),t.friends.forEach(function(t,e){t.rank=e+1}),this._data=t,this._data&&this._data.friends?(this._tips.visible=!1,this.loadPage(0),this.loadSelf()):(this._tips.visible=!1,window.main.render())}}]),e}();e.default=c,c.pageMode=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i};var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.onDraw=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"drawSelf",value:function(t){t.save(),t.transform(1,0,0,1,-this.width*this.anchorX,-this.height*this.anchorY),this.onDraw&&this.onDraw(t),t.restore(),function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"drawSelf",this).call(this,t)}}]),e}();e.default=s},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var t=s(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new _(t,e)),1!==u.length||c||s(d)},_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getDataByCache",value:function(t,e,n){if(this._friendsScores&&this._selfInfo){var i=this.key||"score";this._friendsScores.sort(function(t){return"asc"==t?function(t,e){return t.data[i]-e.data[i]}:function(t,e){return e.data[i]-t.data[i]}}(n)),console.log("getDataByCache: use cache data"),t&&t({friends:this._friendsScores,self:this._selfInfo})}else console.log("getDataByCache: use new data"),this.getData(t,e,n)}},{key:"getData",value:function(t,e,n){var i=this;if(this._checkWx(e,"getFriendCloudStorage")&&this._checkWx(e,"getUserCloudStorage")){var o=this.key||"score",r=0,a=0,s=function(){if(0!==r&&0!==a){r&&r.forEach(function(t){t.data=i._kvArrayToObject(t.KVDataList)}),r.forEach(function(t){t.data[o]=t.data[o]||0});r.sort(function(t){return"asc"==t?function(t,e){return t.data[o]-e.data[o]}:function(t,e){return e.data[o]-t.data[o]}}(n)),r&&(i._friendsScores=r),a&&(i._selfInfo=a),t&&t({friends:r,self:a})}};wx.getFriendCloudStorage({keyList:[o],success:function(t){r=t&&t.data?t.data:null,console.log("wx.getFriendCloudStorage success:",t)},fail:function(t){r=null,console.log("wx.getFriendCloudStorage fail:",t)},complete:s}),wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:function(t){a=t&&t.data?t.data:null,console.log("wx.getUserInfo selfOpenId success:",t)},fail:function(t){a=null,console.log("wx.getUserInfo selfOpenId fail:",t)},complete:s})}}},{key:"getGroupData",value:function(t,e,n,i){var o=this;if(this._checkWx(n,"getGroupCloudStorage")&&this._checkWx(n,"getUserCloudStorage")){var r=this.key||"score",a=0,s=0,l=function(){if(0!==a&&0!==s){a&&a.forEach(function(t){t.data=o._kvArrayToObject(t.KVDataList)}),a.forEach(function(t){t.data[r]=t.data[r]||0});a.sort(function(t){return"asc"==t?function(t,e){return t.data[r]-e.data[r]}:function(t,e){return e.data[r]-t.data[r]}}(i)),a&&(o._groupScores=a),s&&(o._selfInfo=s),e&&e({friends:a,self:s})}};wx.getGroupCloudStorage({shareTicket:t,keyList:[r],success:function(t){a=t&&t.data?t.data:null,console.log("wx.getGroupCloudStorage success:",t)},fail:function(t){a=null,console.log("wx.getGroupCloudStorage fail:",t)},complete:l}),wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:function(t){s=t&&t.data?t.data:null,console.log("wx.getUserInfo selfOpenId success:",t)},fail:function(t){s=null,console.log("wx.getUserInfo selfOpenId fail:",t)},complete:l})}}},{key:"_checkWx",value:function(t,e){return"undefined"==typeof wx?(t&&t({errMsg:"请在微信小游戏里打开哦!"}),!1):!e||void 0!=wx[e]||(t&&t({errMsg:"请升级你的微信版本!"}),!1)}},{key:"_kvArrayToObject",value:function(t){var e={};return t.forEach(function(t){void 0!=t.key&&void 0!=t.value&&(e[t.key]=t.value)}),e}}]),t}();e.default=o,o.key="score",o._selfInfo=null,o._friendsScores=null,o._groupScores=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=l(n(15)),r=l(n(2)),a=(l(n(1)),l(n(0)),l(n(9)),l(n(5)),l(n(4)),l(n(12))),s=l(n(10));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,r.default._layerPos=null,r.default._layerSize=null,this.printResolution(),this.listentoMainDomain()}return i(t,[{key:"printResolution",value:function(){console.log("win size: ("+window.innerWidth+", "+window.innerHeight+") CVS size: ("+CVS.width+", "+CVS.height+")")}},{key:"listentoMainDomain",value:function(){var t=this;window.wx&&wx.onMessage&&wx.onMessage(function(e){if(t.scene.updateSize(),t.printResolution(),e){console.log("子域收到信息: ",JSON.stringify(e)),r.default._layerPos=e.pos||null,r.default._layerSize=e.size||null,e.resolution&&(r.default._resolution=e.resolution),a.default.pageMode=e.pageMode,e.pauseUpdate?window.main.pauseUpdate():e.startUpdate&&window.main.startUpdate();var n=e.msg;if(n){switch(n){case"result":t.processResultLayer(e.key,e.action);break;case"rank":t.processRankLayer(e.key,e.action);break;case"group":t.processGroupLayer(e.ticket,e.key,e.action);break;case"hideAll":t.hideAll();break;case"closeRank":t.closeRankLayer();break;case"closeAll":t.closeAll();break;case"closeGroup":t.closeGroupLayer();break;case"closeAllRank":t.closeRankLayer(),t.closeGroupLayer()}window.main.render()}}})}},{key:"processRankLayer",value:function(t,e){var n=this._rankLayer;e?"show"==e?(this.hideAll(),n?n.visible=!0:this.createRankLayer(t)):n&&("prev"==e?n.prev():"next"==e?n.next():"hide"==e&&(n.visible=!1)):this.createRankLayer(t)}},{key:"createRankLayer",value:function(t){var e=this;this._rankLayer&&this._rankLayer.destroy(),this._rankLayer=new a.default(t),this.scene.addChild(this._rankLayer),o.default.key=t,o.default.getData(function(t){e._rankLayer&&e._rankLayer.setData(t)},function(t){e._rankLayer&&e._rankLayer.setData(t)})}},{key:"processResultLayer",value:function(t,e){var n=this._resultLayer;e?"show"==e?(this.hideAll(),n?n.visible=!0:this.createResultLayer(t)):n&&"hide"==e&&(n.visible=!1):this.createResultLayer(t)}},{key:"createResultLayer",value:function(t){var e=this;this._resultLayer&&this._resultLayer.destroy(),this._resultLayer=new s.default(t),this.scene.addChild(this._resultLayer),o.default.key=t,o.default.getData(function(t){e._resultLayer&&e._resultLayer.setData(t)},function(t){e._resultLayer&&e._resultLayer.setData(t)})}},{key:"processGroupLayer",value:function(t,e,n){var i=this._groupLayer;n?"show"==n?(this.hideAll(),i?i.visible=!0:this.createGroupLayer(t,e)):i&&("prev"==n?i.prev():"next"==n?i.next():"hide"==n&&(i.visible=!1)):this.createGroupLayer(t,e)}},{key:"createGroupLayer",value:function(t,e){var n=this;this._groupLayer&&this._groupLayer.destroy(),this._groupLayer=new a.default(e),this.scene.addChild(this._groupLayer),o.default.key=e,o.default.getGroupData(t,function(t){n._groupLayer&&n._groupLayer.setData(t)},function(t){n._groupLayer&&n._groupLayer.setData(t)})}},{key:"closeGroupLayer",value:function(){this._groupLayer&&this._groupLayer.destroy(),this._groupLayer=null}},{key:"closeRankLayer",value:function(){this._rankLayer&&this._rankLayer.destroy(),this._rankLayer=null}},{key:"closeResultLayer",value:function(){this._resultLayer&&this._resultLayer.destroy(),this._resultLayer=null}},{key:"closeAll",value:function(){this.closeRankLayer(),this.closeResultLayer(),this.closeGroupLayer()}},{key:"hideAll",value:function(){this._groupLayer&&(this._groupLayer.visible=!1),this._rankLayer&&(this._rankLayer.visible=!1),this._resultLayer&&(this._resultLayer.visible=!1)}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=s(n(9)),r=s(n(16)),a=s(n(6));s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ver="0.0.5",this._description="木板大师的子域",console.log("子域版本: "+this._ver+"  子域描述: "+this._description),this.start()}return i(t,[{key:"start",value:function(){window.main=this,this.ctx=CVS.getContext("2d"),this.scene=new o.default,this.listener=new r.default(this.scene),this.bindLoop=this.loop.bind(this)}},{key:"startUpdate",value:function(){console.log("子域开始帧刷新"),this.animId&&cancelAnimationFrame(this.animId),this.animId=requestAnimationFrame(this.bindLoop)}},{key:"pauseUpdate",value:function(){this.animId&&cancelAnimationFrame(this.animId),this.animId=null,console.log("子域停止帧刷新")}},{key:"render",value:function(t){this.ctx.clearRect(0,0,CVS.width,CVS.height),this.scene.visit(this.ctx)}},{key:"update",value:function(t){a.default.update()}},{key:"loop",value:function(t){this.animId=requestAnimationFrame(this.bindLoop,CVS);var e=void 0==this._prevTimestamp?16:t-this._prevTimestamp;this._prevTimestamp=t,this.update(e),this.render(e)}}]),t}();e.default=l},function(t,e,n){"use strict";var i=window.Symbol,o=0;i||((i=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+ ++o+"__"}).iterator=i("Symbol.iterator")),window.Symbol=i},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1));var o=GameGlobal;GameGlobal.__isAdapterInjected||(GameGlobal.__isAdapterInjected=!0,function(){i.addEventListener=i.canvas.addEventListener=function(t,e){i.document.addEventListener(t,e)},i.removeEventListener=i.canvas.removeEventListener=function(t,e){i.document.removeEventListener(t,e)};var t=wx.getSystemInfoSync().platform;if("undefined"==typeof __devtoolssubcontext&&"devtools"===t){for(var e in i){var n=Object.getOwnPropertyDescriptor(o,e);n&&!0!==n.configurable||Object.defineProperty(window,e,{value:i[e]})}for(var r in i.document){var a=Object.getOwnPropertyDescriptor(o.document,r);a&&!0!==a.configurable||Object.defineProperty(o.document,r,{value:i.document[r]})}window.parent=window}else{for(var s in i)o[s]=i[s];o.window=i,window=o,window.top=window.parent=window}}())},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.cancelAnimationFrame=e.requestAnimationFrame=e.clearInterval=e.clearTimeout=e.setInterval=e.setTimeout=e.canvas=e.location=e.localStorage=e.HTMLElement=e.FileReader=e.Audio=e.Image=e.WebSocket=e.XMLHttpRequest=e.navigator=e.document=void 0;var i=n(2);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var o=n(3);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var r=y(n(9)),a=y(n(10)),s=y(n(17)),l=y(n(18)),u=y(n(19)),c=y(n(11)),h=y(n(12)),f=y(n(20)),d=y(n(4)),_=y(n(21)),p=y(n(22));function y(t){return t&&t.__esModule?t:{default:t}}e.document=a.default,e.navigator=s.default,e.XMLHttpRequest=l.default,e.WebSocket=u.default,e.Image=c.default,e.Audio=h.default,e.FileReader=f.default,e.HTMLElement=d.default,e.localStorage=_.default,e.location=p.default;var v=new r.default;e.CVS=wx.getSharedCanvas?wx.getSharedCanvas():v,e.canvas=v,e.setTimeout=setTimeout,e.setInterval=setInterval,e.clearTimeout=clearTimeout,e.clearInterval=clearInterval,e.requestAnimationFrame=requestAnimationFrame,e.cancelAnimationFrame=cancelAnimationFrame},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=wx.getSystemInfoSync(),i=n.screenWidth,o=n.screenHeight,r=n.devicePixelRatio,a=e.innerWidth=i,s=e.innerHeight=o;e.devicePixelRatio=r;e.screen={availWidth:a,availHeight:s},e.performance={now:function(){return Date.now()/1e3}},e.ontouchstart=null,e.ontouchmove=null,e.ontouchend=null},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLCanvasElement=e.HTMLImageElement=void 0;var o,r=n(4),a=(o=r)&&o.__esModule?o:{default:o};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.HTMLImageElement=function(t){function e(){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"img"))}return u(e,a.default),e}(),e.HTMLCanvasElement=function(t){function e(){return s(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"canvas"))}return u(e,a.default),e}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(5),s=(o=a)&&o.__esModule?o:{default:o},l=n(8),u=n(2);var c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.className="",n.childern=[],n.style={width:u.innerWidth+"px",height:u.innerHeight+"px"},n.insertBefore=l.noop,n.innerHTML="",n.tagName=t.toUpperCase(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"getBoundingClientRect",value:function(){return{top:0,left:0,width:u.innerWidth,height:u.innerHeight}}},{key:"focus",value:function(){}},{key:"clientWidth",get:function(){var t=parseInt(this.style.fontSize,10)*this.innerHTML.length;return Number.isNaN(t)?0:t}},{key:"clientHeight",get:function(){var t=parseInt(this.style.fontSize,10);return Number.isNaN(t)?0:t}}]),e}();e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(6),a=(o=r)&&o.__esModule?o:{default:o};var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.className="",t.children=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(7),s=(o=a)&&o.__esModule?o:{default:o};var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.childNodes=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"appendChild",value:function(t){if(!(t instanceof e))throw new TypeError("Failed to executed 'appendChild' on 'Node': parameter 1 is not of type 'Node'.");this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex(function(e){return e===t});return e>-1?this.childNodes.splice(e,1):null}}]),e}();e.default=l},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=new WeakMap,o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.set(this,{})}return n(t,[{key:"addEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.get(this);o||(o={},i.set(this,o)),o[t]||(o[t]=[]),o[t].push(e),n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n.once&&console.warn("EventTarget.addEventListener: options.once is not implemented."),n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"removeEventListener",value:function(t,e){var n=i.get(this)[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}},{key:"dispatchEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.get(this)[t.type];if(e)for(var n=0;n<e.length;n++)e[n](t)}}]),t}();e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=wx.createCanvas();t.type="canvas",t.__proto__.__proto__=new i.default("canvas");t.getContext;return t.getBoundingClientRect=function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},t};n(3);var i=o(n(4));o(n(10));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1)),o=l(n(4)),r=l(n(11)),a=l(n(12)),s=l(n(9));function l(t){return t&&t.__esModule?t:{default:t}}n(15);var u={},c={readyState:"complete",visibilityState:"visible",documentElement:i,hidden:!1,style:{},location:i.location,ontouchstart:null,ontouchmove:null,ontouchend:null,head:new o.default("head"),body:new o.default("body"),createElement:function(t){return"canvas"===t?new s.default:"audio"===t?new a.default:"img"===t?new r.default:new o.default(t)},getElementById:function(t){return t===i.canvas.id?i.canvas:null},getElementsByTagName:function(t){return"head"===t?[c.head]:"body"===t?[c.body]:"canvas"===t?[i.canvas]:[]},querySelector:function(t){return"head"===t?c.head:"body"===t?c.body:"canvas"===t?i.canvas:t==="#"+i.canvas.id?i.canvas:null},querySelectorAll:function(t){return"head"===t?[c.head]:"body"===t?[c.body]:"canvas"===t?[i.canvas]:[]},addEventListener:function(t,e){u[t]||(u[t]=[]),u[t].push(e)},removeEventListener:function(t,e){var n=u[t];if(n&&n.length>0)for(var i=n.length;i--;i>0)if(n[i]===e){n.splice(i,1);break}},dispatchEvent:function(t){var e=u[t.type];if(e)for(var n=0;n<e.length;n++)e[n](t)}};e.default=c},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return wx.createImage()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(13),s=(o=a)&&o.__esModule?o:{default:o};var l=0,u=1,c=2,h=3,f=4,d=new WeakMap,_=new WeakMap,p=(new WeakMap,new WeakMap,function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.HAVE_NOTHING=l,n.HAVE_METADATA=u,n.HAVE_CURRENT_DATA=c,n.HAVE_FUTURE_DATA=h,n.HAVE_ENOUGH_DATA=f,n.readyState=l,_.set(n,"");var o=wx.createInnerAudioContext();return d.set(n,o),o.onCanplay(function(){n.dispatchEvent({type:"load"}),n.dispatchEvent({type:"loadend"}),n.dispatchEvent({type:"canplay"}),n.dispatchEvent({type:"canplaythrough"}),n.dispatchEvent({type:"loadedmetadata"}),n.readyState=c}),o.onPlay(function(){n.dispatchEvent({type:"play"})}),o.onPause(function(){n.dispatchEvent({type:"pause"})}),o.onEnded(function(){n.dispatchEvent({type:"ended"}),n.readyState=f}),o.onError(function(){n.dispatchEvent({type:"error"})}),t&&(d.get(n).src=t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"load",value:function(){console.warn("HTMLAudioElement.load() is not implemented.")}},{key:"play",value:function(){d.get(this).play()}},{key:"pause",value:function(){d.get(this).pause()}},{key:"canPlayType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof t?"":t.indexOf("audio/mpeg")>-1||t.indexOf("audio/mp4")?"probably":""}},{key:"cloneNode",value:function(){var t=new e;return t.loop=d.get(this).loop,t.autoplay=d.get(this).loop,t.src=this.src,t}},{key:"currentTime",get:function(){return d.get(this).currentTime},set:function(t){d.get(this).seek(t)}},{key:"src",get:function(){return _.get(this)},set:function(t){_.set(this,t),d.get(this).src=t}},{key:"loop",get:function(){return d.get(this).loop},set:function(t){d.get(this).loop=t}},{key:"autoplay",get:function(){return d.get(this).autoplay},set:function(t){d.get(this).autoplay=t}},{key:"paused",get:function(){return d.get(this).paused}}]),e}());e.default=p},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(14),a=(o=r)&&o.__esModule?o:{default:o};var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"audio"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),s=(o=a)&&o.__esModule?o:{default:o};var l=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),e}();e.default=l},function(t,e,n){n(16)},function(t,e,n){var i,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1)),r=n(10),a=(i=r)&&i.__esModule?i:{default:i},s=n(8);var l=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=o.canvas,this.currentTarget=o.canvas,this.touches=[],this.targetTouches=[],this.changedTouches=[],this.preventDefault=s.noop,this.stopPropagation=s.noop,this.type=e};function u(t){return function(e){var n=new l(t);n.touches=e.touches,n.targetTouches=Array.prototype.slice.call(e.touches),n.changedTouches=e.changedTouches,n.timeStamp=e.timeStamp,a.default.dispatchEvent(n)}}o.TouchEvent=l,wx.onTouchStart(u("touchstart")),wx.onTouchMove(u("touchmove")),wx.onTouchEnd(u("touchend")),wx.onTouchCancel(u("touchcancel"))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),o={platform:wx.getSystemInfoSync().platform,language:"zh-cn",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN",onLine:!0,geolocation:{getCurrentPosition:i.noop,watchPosition:i.noop,clearWatch:i.noop}};e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap;function l(t){if("function"==typeof this["on"+t]){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this["on"+t].apply(this,n)}}function u(t){this.readyState=t,l.call(this,"readystatechange")}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onabort=null,this.onerror=null,this.onload=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.onloadend=null,this.onreadystatechange=null,this.readyState=0,this.response=null,this.responseText=null,this.responseType="",this.responseXML=null,this.status=0,this.statusText="",this.upload={},this.withCredentials=!1,r.set(this,{"content-type":"application/x-www-form-urlencoded"}),a.set(this,{})}return n(t,[{key:"abort",value:function(){var t=s.get(this);t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=a.get(this);return Object.keys(t).map(function(e){return e+": "+t[e]}).join("\n")}},{key:"getResponseHeader",value:function(t){return a.get(this)[t]}},{key:"open",value:function(e,n){o.set(this,e),i.set(this,n),u.call(this,t.OPENED)}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.readyState!==t.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");wx.request({data:n,url:i.get(this),method:o.get(this),header:r.get(this),responseType:this.responseType,success:function(n){var i=n.data,o=n.statusCode,r=n.header;if("string"!=typeof i&&!(i instanceof ArrayBuffer))try{i=JSON.stringify(i)}catch(t){i=i}if(e.status=o,a.set(e,r),l.call(e,"loadstart"),u.call(e,t.HEADERS_RECEIVED),u.call(e,t.LOADING),e.response=i,i instanceof ArrayBuffer){e.responseText="";for(var s=new Uint8Array(i),c=s.byteLength,h=0;h<c;h++)e.responseText+=String.fromCharCode(s[h])}else e.responseText=i;u.call(e,t.DONE),l.call(e,"load"),l.call(e,"loadend")},fail:function(t){var n=t.errMsg;-1!==n.indexOf("abort")?l.call(e,"abort"):l.call(e,"error",n),l.call(e,"loadend")}})}},{key:"setRequestHeader",value:function(t,e){var n=r.get(this);n[t]=e,r.set(this,n)}}]),t}();c.UNSEND=0,c.OPENED=1,c.HEADERS_RECEIVED=2,c.LOADING=3,c.DONE=4,e.default=c},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=new WeakMap,o=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.binaryType="",this.bufferedAmount=0,this.extensions="",this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.protocol="",this.readyState=3,"string"!=typeof e||!/(^ws:\/\/)|(^wss:\/\/)/.test(e))throw new TypeError("Failed to construct 'WebSocket': The URL '"+e+"' is invalid");this.url=e,this.readyState=t.CONNECTING;var r=wx.connectSocket({url:e,protocols:Array.isArray(o)?o:[o]});return i.set(this,r),r.onClose(function(e){n.readyState=t.CLOSED,"function"==typeof n.onclose&&n.onclose(e)}),r.onMessage(function(t){"function"==typeof n.onmessage&&n.onmessage(t)}),r.onOpen(function(){n.readyState=t.OPEN,"function"==typeof n.onopen&&n.onopen()}),r.onError(function(t){"function"==typeof n.onerror&&n.onerror(new Error(t.errMsg))}),this}return n(t,[{key:"close",value:function(e,n){this.readyState=t.CLOSING,i.get(this).close({code:e,reason:n})}},{key:"send",value:function(t){if("string"!=typeof t&&!(t instanceof ArrayBuffer))throw new TypeError("Failed to send message: The data "+t+" is invalid");i.get(this).send({data:t})}}]),t}();o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.CLOSED=3,e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={get length(){return wx.getStorageInfoSync().keys.length},key:function(t){return wx.getStorageInfoSync().keys[t]},getItem:function(t){return wx.getStorageSync(t)},setItem:function(t,e){return wx.setStorageSync(t,e)},removeItem:function(t){wx.removeStorageSync(t)},clear:function(){wx.clearStorageSync()}};e.default=n},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default={href:"game.js",reload:function(){}}}])},function(t,e,n){"use strict";n(19),n(18);var i,o=n(17);new((i=o)&&i.__esModule?i:{default:i}).default}]);